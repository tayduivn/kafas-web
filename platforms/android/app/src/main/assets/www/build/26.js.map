{"version":3,"sources":["../../src/pages/track/track.module.ts","../../src/pages/track/track.ts"],"names":[],"mappings":"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","file":"26.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TrackPage } from './track';\n\n@NgModule({\n  declarations: [\n    TrackPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TrackPage),\n  ],\n})\nexport class TrackPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/track/track.module.ts","import { Component, NgZone, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, LoadingController, NavController, Platform, NavParams } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { Subscription } from 'rxjs/Subscription';\nimport { filter } from 'rxjs/operators';\nimport { Storage } from '@ionic/storage';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { Observable } from 'rxjs/Observable';\nimport { NativeGeocoder, NativeGeocoderReverseResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder';\nimport { map } from \"rxjs/operators\";\nimport {\n  GoogleMaps,\n  GoogleMap,\n  GoogleMapsEvent,\n  GoogleMapOptions,\n  CameraPosition,\n  MarkerOptions,\n  Marker,\n  Environment\n} from '@ionic-native/google-maps';\nimport firebase from \"firebase\";\n \ndeclare var google;\nvar marker;\n\n\n\n/**\n * Generated class for the TrackPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-track',\n  templateUrl: 'track.html',\n})\nexport class TrackPage {\n @ViewChild('map') mapElement: ElementRef;\n @ViewChild('directionsPanel') directionsPanel: ElementRef;\n\n\n    map: GoogleMap;\n   address;\n  currentMapTrack = null;\n \n  isTracking = false;\n  trackedRoute = [];\n  previousTracks = [];\n  LatLng: any;\n  DLatDLng: any;\n  distance: any;\n  latitude: number = 0;\n  longitude: number = 0;\n \n  positionSubscription: Subscription;\n  contactNo: any = \"\";\n\n  //time of arrival\n\n   directionsService = new google.maps.DirectionsService;\n  directionsDisplay = new google.maps.DirectionsRenderer;\n  start:any;\n  end:any;\n  travelType:any = 'DRIVING';\n  route: any;\n\n  //distance and duration\n  duration:any='';\n\n  dlatLng: any;\n  key: any;\n  customer: any;\n  orderId: any;\n\n  startLat: any;\n  startLng: any;\n\n  mapOptions: any;\n  points: any = [];\n\n  public marker = [];\n  p1 = [];\n  p2 = [];\n\n  markerArray = [];\n\n\n\n  track: any;\n  destinationLat: any;\n  destinationLng: any;\n\nlastLat: any;\nlastLng: any;\n\ndName: any;\ndPhone: any;\n\n\n  constructor(public loadingCtrl: LoadingController, private zone: NgZone, public db: AngularFireDatabase, private plt: Platform, private geolocation: Geolocation, private storage: Storage, public navCtrl: NavController, public navParams: NavParams) {\n\n\n\n  this.orderId = this.navParams.get(\"orderId\");\n\n    console.log(this.orderId)\n\n         this.db\n        .object(\"/track/\" + this.orderId)\n        .valueChanges()\n        .subscribe((res: any) => {\n          this.track = res;\n          this.duration = res.duration;\n          this.distance = res.distance;\n          this.startLat = res.startLat;\n          this.startLng = res.startLng;\n          this.destinationLat = res.destinationLat;\n          this.destinationLng = res.destinationLng;\n          this.lastLat = res.lastLat;\n          this.lastLng = res.lastLng;\n          this.dName = res.dName;\n          this.dPhone = res.dPhone;\n\n           console.log(this.lastLat, this.lastLng)\n\n           this.addMarker();\n\n\n              \n       \n          \n        });\n\n\n  }\n\n\n  ionViewDidLoad() {\n\n\n   this.loadMap();\n\n\n\n  }\n \n\n  loadMap(){\n\n\n    let loader = this.loadingCtrl.create({\n   //    content: \"Please wait..\",\n       spinner: \"dots\",\n        cssClass: 'my-loading-class'\n      });\n    loader.present();\n\n     this.geolocation.getCurrentPosition().then((position) => {\n\n\n      let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n\n      this.LatLng = latLng;\n      \n\n      let mapOptions = {\n        center: latLng,\n        tilt: 30,\n        zoom: 18,\n        mapTypeId: google.maps.MapTypeId.ROADMAP\n      }\n\n      this.mapOptions = mapOptions;\n\n      this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\n\n      \n          loader.dismiss();\n       //   this.addMarkerStart();\n\n\n        this.startLat = position.coords.latitude;\n        this.startLng = position.coords.longitude;\n       \n        console.log(position.coords.latitude, position.coords.longitude);\n    }, (err) => {\n      console.log(err);\n    });\n\n\n\n  }\n\naddMarkerStart(){\n\n    let marker = new google.maps.Marker({\n      map: this.map,\n    //  icon: 'assets/img/icon3.png',\n      animation: google.maps.Animation.DROP,\n      position: this.LatLng,\n    });\n\n  }\n\naddMarker(){\n\n\n var  markerCoords = new google.maps.LatLng(this.lastLat, this.lastLng);\n\n  let markerIcon = {\n  url: 'assets/img/carg.png',\n  scaledSize: new google.maps.Size(30, 30),\n  anchor: new google.maps.Point(20,40) // lets offset the marker image\n};\n\n      if (marker && marker.setMap) {\n    marker.setMap(null);\n}\n\n    marker = new google.maps.Marker({\n    map: this.map,\n  //  animation: google.maps.Animation.DROP,\n   position:  markerCoords,\n   icon: markerIcon,\n  });\n    let content = \"<p><u><b><center>Your Order is on it's way</u> &nbsp;&nbsp;&nbsp;<br><u> to you!</center></b></u><br>Driver Name: \" + this.dName + \"<br>Driver Phone: \" + this.dPhone + \" &nbsp;&nbsp;&nbsp;</p>\";\n     this.addInfoWindow(marker, content);\n\n\n       marker.setMap(this.map);\n       \n       console.log(marker);\n\n\n\n\n}\n\n\n addInfoWindow(marker, content){\n\n\n    let infoWindow = new google.maps.InfoWindow({\n      content: content\n    });\n\n    \n      infoWindow.open(this.map, marker);\n  }\n\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/track/track.ts"],"sourceRoot":""}