{"version":3,"sources":["../../src/pages/order-list/order-list.module.ts","../../src/app/pipes.module.ts","../../src/app/app.pipe.ts","../../src/pages/order-list/order-list.ts"],"names":[],"mappings":"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","file":"16.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderListPage } from './order-list';\nimport { PipesModule } from \"../../app/pipes.module\";\n\n@NgModule({\n  declarations: [\n    OrderListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderListPage),\n    PipesModule\n  ],\n})\nexport class OrderListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-list/order-list.module.ts","import { NgModule } from \"@angular/core\";\nimport { AppPipe } from \"./app.pipe\";\nimport { TranslateModule } from \"@ngx-translate/core\";\n\n@NgModule({\n  declarations: [AppPipe],\n  imports: [TranslateModule],\n\n  exports: [TranslateModule, AppPipe]\n})\nexport class PipesModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pipes.module.ts","import { Pipe, PipeTransform } from \"@angular/core\";\n\n@Pipe({\n  name: \"limitPipe\"\n})\nexport class AppPipe implements PipeTransform {\n  transform(value: string, args: any[]): any {\n    if (value) {\n      let limit = args.length > 0 ? parseInt(args[0], 50) : 50;\n      let trail = args.length > 1 ? args[1] : \"...\";\n      return value.length > limit ? value.substring(0, limit) + trail : value;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.pipe.ts","import { Component } from '@angular/core';\nimport { IonicPage, ToastController, NavController, LoadingController } from \"ionic-angular\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport { AngularFireDatabase } from \"@angular/fire/database\";\nimport { map } from \"rxjs/operators\";\nimport firebase from \"firebase\";\n\n@IonicPage()\n@Component({\n  selector: 'page-order-list',\n  templateUrl: 'order-list.html',\n})\nexport class OrderListPage {\n\n  ordersDetails: any[] = [];\n  public noOfItems: number;\n  public currency: {};\n  orderId: any;\n\n    //distance and duration\n  duration:any='';\n\n  dlatLng: any;\n  key: any;\n  customer: any;\n\n  startLat: any;\n  startLng: any;\n\n  mapOptions: any;\n  points: any = [];\n\n  public marker = [];\n  p1 = [];\n  p2 = [];\n\n  markerArray = [];\n\n\n\n  track: any;\n  destinationLat: any;\n  destinationLng: any;\n\n  lastLat: any;\nlastLng: any;\ndistance: any;\n\n  constructor(\n    public af: AngularFireAuth,\n    public db: AngularFireDatabase,\n    public navCtrl: NavController,\n    private toastCtrl: ToastController,\n    public loadingCtrl: LoadingController\n  ) {\n    this.currency = JSON.parse(localStorage.getItem('currency'));\n    if (this.af.auth.currentUser) {\n      let loader = this.loadingCtrl.create({\n       //  content: \"Please wait..\",\n      spinner: \"dots\",\n      cssClass: 'my-loading-class'\n    });\n      loader.present().then(() => {\n        let userID = this.af.auth.currentUser.uid;\n        this.db\n          .list(\"/orders\", ref => ref.orderByChild(\"userId\").equalTo(userID))\n          .snapshotChanges()\n          .pipe(\n            map(changes =>\n              changes.map(c => ({ $key: c.payload.key, ...c.payload.val() }))\n            )\n          ).subscribe((res: any) => {\n            this.ordersDetails = res.sort((a,b) => (a as any).finished - (b as any).finished).reverse();\n            this.orderId = res.orderId;\n            console.log(\"order Detail\" + JSON.stringify(this.ordersDetails));\n          })\n\n\n\n        // .subscribe(\n        //   (res: any) => {\n        //     this.ordersDetails = [];\n        //     res.forEach(item => {\n        //       let temp = item.payload.val();\n        //       temp[\"$key\"] = item.payload.key;\n        //       this.ordersDetails.push(temp);\n        //       // console.log(\"orders-\" + JSON.stringify(this.ordersDetails));\n        //     });\n        loader.dismiss();\n      },\n        error => {\n          console.error(error);\n          loader.dismiss();\n        }\n      );\n\n    }\n  }\n\n  ionViewWillEnter() {\n    let cart: Array<any> = JSON.parse(localStorage.getItem(\"Cart\"));\n    this.noOfItems = cart != null ? cart.length : null;\n\n\n  }\n\n  isOrders(): boolean {\n    return this.ordersDetails.length == 0 ? false : true;\n  }\n\n  orders(orderId) {\n\n\n let loader = this.loadingCtrl.create({\n      //  content: \"Please wait..\",\n         spinner: \"dots\",\n        cssClass: 'my-loading-class'\n      });\n    loader.present();\n\n          firebase.database().ref(`track/${orderId}/`).once(\"value\", snapshot => {\n   if (snapshot.exists()){\n\n     this.navCtrl.push(\"TrackPage\", { \n       orderId: orderId\n\n        });\n      loader.dismiss();\n   }\n   else {\n      loader.dismiss();\n     this.createToaster(\"Order has not been processed for delivery or has already been delivered.\", 5000);\n   }\n})\n\n}\n\n\n\n   createToaster(message, duration) {\n    let toast = this.toastCtrl.create({\n      message: message,\n      duration: duration\n    });\n    toast.present();\n  }\n\nnavcart(){\n  this.navCtrl.push(\"CartPage\")\n}\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-list/order-list.ts"],"sourceRoot":""}